<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Archived Reviews Checker</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        background-color: #f4f4f4;
      }
      input, button {
        padding: 10px;
        margin: 10px 0;
        font-size: 16px;
      }
      #result {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Archived Reviews Checker</h1>
    <p>Enter your wallet address:</p>
    <input id="walletInput" type="text" placeholder="0x..." size="50" />
    <br />
    <button onclick="checkArchived()">Check</button>

    <div id="result"></div>

    <script>
      async function checkArchived() {
        const wallet = document.getElementById("walletInput").value.trim();
        const resultDiv = document.getElementById("result");
        if (!wallet.startsWith("0x") || wallet.length !== 42) {
          resultDiv.innerHTML = "<p style='color:red;'>Invalid address.</p>";
          return;
        }

        resultDiv.innerHTML = "Checking logsâ€¦";

        const api = `https://api.basescan.org/api?module=logs&action=getLogs&fromBlock=0&toBlock=latest&address=0x6d3a8fd5cf89f9a429bfadfd970968f646aff325&topic3=${wallet}&apikey=J5Y1MNMYZVQBE6PA7KEGNGS1DCJIJNUWFS`;

        try {
          const res = await fetch(api);
          const data = await res.json();
          if (!data.result || data.result.length === 0) {
            resultDiv.innerHTML = "No archived reviews found.";
            return;
          }

          let html = `<p>Found ${data.result.length} archived reviews:</p><ul>`;
          for (const log of data.result) {
            const author = "0x" + log.topics[2].slice(26);
            html += `<li>Archived by: ${author}</li>`;
          }
          html += "</ul>";
          resultDiv.innerHTML = html;
        } catch (e) {
          resultDiv.innerHTML = `<p style="color:red;">Error fetching data</p>`;
        }
      }
    </script>
  </body>
</html>
